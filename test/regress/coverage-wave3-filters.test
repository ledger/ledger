; Coverage tests for filters.cc
; Tests: changed_value_posts (lines 705-759, 774-835),
;        interval_posts (lines 1006-1037), forecast (lines 1420-1490),
;        output.h clear() methods (lines 117-213)

; Test interval report (covers interval_posts operator() and flush())
2024/01/05 Payee A
    Expenses:Food    $100.00
    Assets:Cash

2024/01/20 Payee B
    Expenses:Food    $150.00
    Assets:Cash

2024/02/10 Payee C
    Expenses:Food    $200.00
    Assets:Cash

; Monthly interval (covers interval_posts lines 1006-1037)
test reg --monthly Expenses:Food
24-Jan-01 - 24-Jan-31           Expenses:Food               $250.00      $250.00
24-Feb-01 - 24-Feb-29           Expenses:Food               $200.00      $450.00
end test

; Weekly interval
test reg --weekly Expenses:Food
23-Dec-31 - 24-Jan-06           Expenses:Food               $100.00      $100.00
24-Jan-14 - 24-Jan-20           Expenses:Food               $150.00      $250.00
24-Feb-04 - 24-Feb-10           Expenses:Food               $200.00      $450.00
end test

; Test subtotal (covers subtotal_posts report_subtotal lines 880-948)
test reg --subtotal Expenses:Food
24-Jan-05 - 24-Feb-10           Expenses:Food               $450.00      $450.00
end test

; Test market revaluation (covers changed_value_posts lines 705-759)
P 2024/01/01 EUR $1.10
P 2024/02/01 EUR $1.20

2024/01/01 Buy EUR
    Assets:EUR    100 EUR
    Assets:USD    $-110.00

test reg --market --gain Assets:EUR --begin 2024/01/01 --end 2024/03/01
24-Feb-01 Commodities revalued  <Revalued>                   $10.00       $10.00
end test

; Wave 2 coverage tests for xact.cc fn_any and fn_all
; Covers: fn_any (lines 608-618), fn_all (lines 620-630),
;   xact_t::lookup (lines 633-643)

2024/01/01 Test1
    Expenses:Food     $10.00
    Assets:Cash

2024/01/02 Test2
    Expenses:Food     $20.00
    Assets:Cash

; Test fn_any - match xacts where any posting amount > 15
; Only Test2 qualifies (has posting of $20)
test reg --limit "any(amount > 15)" --end 2024/01/03 Expenses
24-Jan-02 Test2                 Expenses:Food                $20.00       $20.00
end test

; Test fn_all - match xacts where all postings have amount != 0
test reg --limit "all(amount != 0)" --end 2024/01/03 Expenses
24-Jan-01 Test1                 Expenses:Food                $10.00       $10.00
24-Jan-02 Test2                 Expenses:Food                $20.00       $30.00
end test

; Test xact code lookup - covers line 646-647
2024/01/03 (CHK-100) Payment
    Expenses:Rent     $500.00
    Assets:Cash

test reg --format "%(code)\n" --begin 2024/01/03 --end 2024/01/04
CHK-100
CHK-100
end test

; Test xact magnitude - covers line 651-652
test reg --amount "magnitude" --begin 2024/01/03 --end 2024/01/04 Expenses
24-Jan-03 Payment               Expenses:Rent               $500.00      $500.00
end test

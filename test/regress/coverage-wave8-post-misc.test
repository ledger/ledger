; Coverage tests for post.cc miscellaneous paths
; Targets lines 160-164 (code), 193-196 (amount null), 211-212 (compound),
;   253 (total null), 262 (count), 272-274 (account truncate),
;   287-289 (account with mask), 458-459 (index), 342-344 (datetime)

; Transaction with code
2024/01/01 (CHK001) Test with Code
    Expenses:Food             $10.00
    Assets:Cash

; Transaction without code
2024/01/02 Test no Code
    Expenses:Drink             $5.00
    Assets:Cash

; Test code lookup (lines 160-164)
test reg --format '%(code)\n' Expenses:Food
CHK001
end test

test reg --format '%(code)X\n' Expenses:Drink
X
end test

; Test index (alias for count) - line 458-459
test reg --format '%(index)\n' Expenses:Food
1
end test

; Test total lookup on first post
test reg --format '%(total)\n' Expenses:Food
$10.00
end test

; Test xact lookup through post (line 510-511)
test reg --format '%(xact ? "yes" : "no")\n' Expenses:Food
yes
end test

; Test commodity lookup (line 435-436)
test reg --format '%(commodity)\n' Expenses:Food
$
end test

; Test datetime lookup - lines 342-344
test reg --format '%(datetime)\n' Expenses:Food
2024/01/01 00:00:00
end test

; Test post lookup (returns the post itself) - line 475-476
test reg --format '%(post ? "yes" : "no")\n' Expenses:Food
yes
end test

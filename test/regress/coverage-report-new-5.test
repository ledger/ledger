; Coverage tests for budget/forecast/revalued paths in report.cc and filters.h
; Targets: report.cc budget_command, filters.h budget_posts, forecast_posts,
;          changed_value_posts, posts_as_equity

~ Monthly
    Expenses:Food    $200.00
    Assets:Checking

2024/01/15 Grocery Store
    Expenses:Food    $180.00
    Assets:Checking

2024/02/10 Grocery Store
    Expenses:Food    $220.00
    Assets:Checking

P 2024/01/01 $ 0.80 EUR
P 2024/02/01 $ 0.82 EUR

; Test budget command (report.cc budget_command, line 1624)
test budget --begin 2024/01/01 --end 2024/03/01
    $-400.00     $-400.00            0  100%  Assets:Checking
     $400.00      $400.00            0  100%  Expenses:Food
------------ ------------ ------------ -----
           0            0            0     0
end test

; Test --add-budget option (filters.h budget_posts BUDGET_BUDGETED|BUDGET_UNBUDGETED)
test budget --add-budget --begin 2024/01/01 --end 2024/03/01
    $-400.00     $-400.00            0  100%  Assets:Checking
     $400.00      $400.00            0  100%  Expenses:Food
------------ ------------ ------------ -----
           0            0            0     0
end test

; Test --unbudgeted option (filters.h budget_posts BUDGET_UNBUDGETED)
test budget --unbudgeted --begin 2024/01/01 --end 2024/03/01
end test

; Test equity command with specific account filter
test equity Expenses
2024/02/10 Opening Balances
    Expenses:Food                            $400.00
    Equity:Opening Balances
end test

; Test register with --historical (report.cc line 1192-1193)
test reg --historical Expenses
24-Jan-15 Grocery Store         Expenses:Food             EUR144.00    EUR144.00
24-Feb-10 Grocery Store         Expenses:Food             EUR180.40    EUR324.40
end test

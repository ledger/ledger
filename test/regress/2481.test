# Test for issue #2481: --exchange option produces empty output due to commodity precision issues
# When a commodity is only defined in a price record (P directive), its precision
# should be inferred from the price amount, not default to 0.
#
# Original report syntax:
#   2222-01-01
#       a    1.0000000 g
#       b

P 2020-01-01 g 0.022 e

2222-01-01
    a    1.0000000 g
    b

test bal a -X e
              e0.022  a
end test

test bal -E -X e
              e0.022  a
             e-0.022  b
--------------------
                   0
end test
